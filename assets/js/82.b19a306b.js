(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{447:function(e,t,s){"use strict";s.r(t);var a=s(45),n=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"docker-compose"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose"}},[e._v("#")]),e._v(" Docker-Compose")]),e._v(" "),s("ul",[s("li",[s("p",[e._v("url")]),e._v(" "),s("ul",[s("li",[s("code",[e._v(".yml")]),e._v("  https://docs.docker.com/compose")]),e._v(" "),s("li",[s("code",[e._v("Reference")]),e._v("  https://docs.docker.com/compose/compose-file")]),e._v(" "),s("li",[s("code",[e._v("Github")]),e._v("  https://github.com/docker/compose")])])]),e._v(" "),s("li",[s("p",[s("em",[e._v("3 steps")])]),e._v(" "),s("ul",[s("li",[s("code",[e._v("DockerFile")]),e._v("  app's environment ("),s("em",[e._v("eg: nginx/DockerFile")]),e._v(").")]),e._v(" "),s("li",[s("code",[e._v("YAML")]),e._v(" services file ("),s("em",[e._v("docker-compose.yml")]),e._v(")")]),e._v(" "),s("li",[s("code",[e._v("Swarm stacks")]),e._v(" or "),s("code",[e._v("docker-compose up")])])])]),e._v(" "),s("li",[s("p",[s("em",[e._v("Feature")])]),e._v(" "),s("ul",[s("li",[e._v("Multiple isolated environment on single host ("),s("em",[e._v("foldername as projectname")]),e._v(")")]),e._v(" "),s("li",[e._v("preserve volume data when containers are created("),s("em",[e._v("past data is not lost after restart")]),e._v(")")]),e._v(" "),s("li",[e._v("recreate only modified container")]),e._v(" "),s("li",[e._v("variables support in file ("),s("em",[e._v("${APPLICATION}")]),e._v(")")])])])]),e._v(" "),s("h1",{attrs:{id:"reference"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#reference"}},[e._v("#")]),e._v(" Reference")]),e._v(" "),s("p",[s("code",[e._v("https://docs.docker.com/compose/compose-file/")])]),e._v(" "),s("ul",[s("li",[s("p",[s("code",[e._v("yml")]),e._v(" or "),s("code",[e._v(".yaml")]),e._v(" file defining services, networks, volumes")])]),e._v(" "),s("li",[s("p",[s("em",[e._v("CMD, EXPOSE, VOLUME, ENV")]),e._v(" are not needed in yml")])]),e._v(" "),s("li",[s("p",[s("em",[e._v("${VARIABLE}")]),e._v("  using Environment variables")])]),e._v(" "),s("li",[s("p",[s("em",[e._v("./docker-compose.yml")]),e._v(" default file path")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("NOT SUPPORTED BY SWARM")])]),e._v(" "),s("ul",[s("li",[e._v("[\nbuild\ncgroup_parent\ncontainer_name\ndevices\ndepends_on\ndns\ndns_search\ntmpfs\nexternal_links\nlinks\nnetwork_mode\nsecurity_opt\nstop_signal\nsysctls\nuserns_mode\n]")])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("build")]),e._v("["),s("em",[e._v("Ignored by swarm")]),e._v("]")]),e._v(" "),s("ul",[s("li",[e._v("path to build context")]),e._v(" "),s("li",[e._v("swarm accepts only images")]),e._v(" "),s("li",[s("code",[e._v("CONTEXT")])]),e._v(" "),s("li",[s("code",[e._v("DockerFile")])]),e._v(" "),s("li",[s("code",[e._v("ARGS")])]),e._v(" "),s("li",[s("code",[e._v("CACHE_FROM")])]),e._v(" "),s("li",[s("code",[e._v("LABELS")])])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("cap_add")]),e._v(" & "),s("code",[e._v("cap_drop")]),e._v(" ["),s("em",[e._v("Ignored by swarm")]),e._v("]")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("command")])]),e._v(" "),s("ul",[s("li",[e._v("override default command")]),e._v(" "),s("li",[s("code",[e._v("command: bundle exec thin -p 3000")])]),e._v(" "),s("li",[s("code",[e._v('command: ["bundle", "exec", "thin", "-p", "3000"]')])])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("configs")]),e._v("[version 3.3]")]),e._v(" "),s("ul",[s("li",[e._v("cannot be writable.(because its mounted in temporary filesystem)")]),e._v(" "),s("li",[s("em",[e._v("short syntax")]),e._v(" "),s("ul",[s("li",[e._v("just name of "),s("code",[e._v("external")]),e._v(" configs")]),e._v(" "),s("li",[e._v("Already defined from "),s("em",[e._v("other stacks")]),e._v(" or command "),s("code",[e._v("docker config create")])]),e._v(" "),s("li",[e._v("mounts at "),s("code",[e._v("/<config_name>")]),e._v(" within container")]),e._v(" "),s("li",[e._v("source name & destination mountpoint are both set to config name")]),e._v(" "),s("li",[e._v("eg:")])]),e._v(" "),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[e._v("    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"3.3"')]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("services")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("redis")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("image")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" redis"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("latest\n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("deploy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n                replicas"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v("\n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("configs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" my_config\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" my_other_config\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("configs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("my_config")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("file")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" ./my_config.txt \n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("my_other_config")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n            `external`"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[e._v("true")]),e._v("        \n")])])])]),e._v(" "),s("li",[s("em",[e._v("Long syntax")]),e._v(" "),s("ul",[s("li",[s("code",[e._v("source")])]),e._v(" "),s("li",[s("code",[e._v("target")])]),e._v(" "),s("li",[s("code",[e._v("uid")]),e._v(" & "),s("code",[e._v("pid")]),e._v(" (linux only)")]),e._v(" "),s("li",[s("code",[e._v("mode")]),e._v(" is permission. Format is octal notation. world readable code ="),s("code",[e._v("0444")]),e._v(" "),s("ul",[s("li",[e._v("writable bit is ignored.")])])]),e._v(" "),s("li",[e._v("eg: [cannot access "),s("em",[e._v("my_other_config")]),e._v(" ]")])]),e._v(" "),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[e._v("    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"3.3"')]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("services")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("redis")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("image")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" redis"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("latest\n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("deploy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n                "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("replicas")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v("\n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("configs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("source")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" my_config\n                  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("target")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" /redis_config\n                  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("uid")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("103")]),e._v("\n                  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("gid")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("103")]),e._v("\n                  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("mode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("0440")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("configs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("my_config")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" \n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("file")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" ./my_config.txt \n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("my_other_config")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("external")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[e._v("true")]),e._v("    \n")])])])])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("cgroup_parent")]),e._v("["),s("em",[e._v("Ignored by swarm")]),e._v("]")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("container_name")]),e._v("["),s("em",[e._v("Ignored by swarm")]),e._v("]")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("credential_spec")]),e._v("[version 3.3] [windows services only]")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("deploy")]),e._v("  [version 3] [swarm only] [docker-compose up "),s("em",[e._v("is ignored")]),e._v("]")]),e._v(" "),s("ul",[s("li",[e._v("eg:")])]),e._v(" "),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[e._v("    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("redis")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("image")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" redis"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("latest\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("deploy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("replicas")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("6")]),e._v(" \n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("update_config")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n                "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("parallelism")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("2")]),e._v(" \n                "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("delay")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" 10s\n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("restart_policy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n                "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("condition")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" on"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("failure\n")])])]),s("ul",[s("li",[s("p",[s("code",[e._v("ENDPOINT_MODE")])]),e._v(" "),s("ul",[s("li",[e._v("Methods of "),s("em",[e._v("service discovery")]),e._v(" for external clients connecting to swarm")]),e._v(" "),s("li",[s("code",[e._v("endpoint_mode: vip")]),e._v(" "),s("ul",[s("li",[e._v("IS DEFAULT")]),e._v(" "),s("li",[e._v("Docker gives service a virtual ip "),s("em",[e._v("(VIP)")]),e._v(' as "frontend" for clients to reach on network')]),e._v(" "),s("li",[e._v("Docker routes requests between client & available worker node for service")]),e._v(" "),s("li",[e._v("client do not know "),s("em",[e._v("number of nodes")]),e._v(" or "),s("em",[e._v("IP")]),e._v(" OR "),s("em",[e._v("PORTS")])])])]),e._v(" "),s("li",[s("code",[e._v("endpoint_mode: dnsrr")]),e._v(" "),s("ul",[s("li",[e._v("DNS "),s("em",[e._v("RoundRobin")])]),e._v(" "),s("li",[e._v("No single virtual IP")]),e._v(" "),s("li",[e._v("Docker sets "),s("em",[e._v("dns entries")]),e._v(" for service")]),e._v(" "),s("li",[e._v("DNS query for service name returns a "),s("em",[e._v("list of IP addresses")])]),e._v(" "),s("li",[e._v("clients connect "),s("em",[e._v("directly to anyone IP")])]),e._v(" "),s("li",[e._v("useful if using our own "),s("em",[e._v("load balancer")]),e._v("] or "),s("em",[e._v("Hybrid windows & Linux")])])])])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("LABELS")])]),e._v(" "),s("ul",[s("li",[e._v("For "),s("em",[e._v("services")]),e._v(" only. Not for any "),s("em",[e._v("containers")]),e._v(" "),s("ul",[s("li",[e._v('eg:\nweb:\nimage: web\ndeploy:\nlabels:\nmylabel: "any values"')])])]),e._v(" "),s("li",[e._v("For "),s("em",[e._v("containers")]),e._v(" only. Not for any "),s("em",[e._v("service")]),e._v(" "),s("ul",[s("li",[e._v("eg")])]),e._v(" "),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[e._v("    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("web")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" \n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("image")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" web \n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("labels")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" \n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("mylabel")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"any value"')]),e._v("\n")])])])])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("MODE")])]),e._v(" "),s("ul",[s("li",[s("code",[e._v("replicated")]),e._v(" "),s("ul",[s("li",[s("em",[e._v("0...n")]),e._v(" containers (DEFAULT)")])])]),e._v(" "),s("li",[s("code",[e._v("global")]),e._v(" "),s("ul",[s("li",[s("em",[e._v("1")]),e._v(" container per swarm node.")])])]),e._v(" "),s("li",[e._v("eg")])]),e._v(" "),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[e._v("   "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("services")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("worker")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("image")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" dockersamples/examplevotingapp_worker \n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("deploy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("mode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" global\n")])])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("PLACEMENT")])]),e._v(" "),s("ul",[s("li",[e._v("EG:")])]),e._v(" "),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[e._v("    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("services")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("db")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("image")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" postgres \n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("deploy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n                "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("placement")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" \n                    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("constraints")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n                        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" node.role == manager \n                        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" engine.label.operatingsystem == ubuntu 14.04\n")])])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("REPLICAS")])]),e._v(" "),s("ul",[s("li",[e._v("iF "),s("code",[e._v("replicated")]),e._v(" mode then")]),e._v(" "),s("li",[e._v("number of container replicas running on same time")]),e._v(" "),s("li",[e._v("eg:")])]),e._v(" "),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[e._v("    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("services")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" \n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("worker")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("images")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" dockersamples/examplevotingapp_worker \n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("networks")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" frontend\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" backend\n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("deploy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n                "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("mode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" replicated \n                "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("replicas")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("6")]),e._v("\n")])])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("RESOURCES")]),e._v("[VERSION 3]")]),e._v(" "),s("ul",[s("li",[e._v("Replaces "),s("em",[e._v("[cpu_shares, cpu_quota, cpuset, mem_limit, memswap_limit, mem_swappiness]")])]),e._v(" "),s("li",[e._v("eg:")])]),e._v(" "),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[e._v("    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("deploy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("limits")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("cpu")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"0.001"')]),e._v("\n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("memory")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" 50M\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("reservations")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("cpu")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"0.0001"')]),e._v("\n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("memory")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" 20M\n")])])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("OOME-Out Of Memory exceptions")])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("RESTART_POLICY")])]),e._v(" "),s("ul",[s("li",[e._v("Restart containers")]),e._v(" "),s("li",[s("code",[e._v("condition")]),e._v(" "),s("ul",[s("li",[s("em",[e._v("none")]),e._v(" , "),s("em",[e._v("on-failure")]),e._v(", "),s("em",[e._v("any")]),e._v(".")]),e._v(" "),s("li",[s("em",[e._v("any")]),e._v(" is default")])])]),e._v(" "),s("li",[s("code",[e._v("delay")]),e._v("           # wait between restart attempts")]),e._v(" "),s("li",[s("code",[e._v("max_attempts")]),e._v("    # maximum restart attempts")]),e._v(" "),s("li",[s("code",[e._v("window")]),e._v("          # time to wait before concluding restart is successful")]),e._v(" "),s("li",[e._v("eg:")])]),e._v(" "),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[e._v("    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("deploy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("restart_policy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("condition")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" on"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("failure\n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("dealy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" 5s\n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("max_attempts")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("3")]),e._v(" \n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("window")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" 120s\n")])])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("UPDATE_CONFIG")])]),e._v(" "),s("ul",[s("li",[e._v("Config for how to update service")]),e._v(" "),s("li",[s("code",[e._v("parallelism")]),e._v(" # n containers update at a time")]),e._v(" "),s("li",[s("code",[e._v("delay")]),e._v("   # time between updating group of containers")]),e._v(" "),s("li",[s("code",[e._v("failure_action")]),e._v(" ["),s("em",[e._v("continue")]),e._v(", "),s("em",[e._v("rollback")]),e._v(", "),s("em",[e._v("pause(default)")]),e._v("] # action on update failure")]),e._v(" "),s("li",[s("code",[e._v("monitor")]),e._v("     # duration after each task update to monitor for failure")]),e._v(" "),s("li",[s("code",[e._v("max_failure_ratio")]),e._v("   # failure rate to tolerate")]),e._v(" "),s("li",[e._v("eg.")])]),e._v(" "),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[e._v("    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("deploy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("replicas")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("2")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("update_config")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("parallelism")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("2")]),e._v(" \n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("dealy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" 10s\n\n")])])])])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("devices")]),e._v("  ["),s("em",[e._v("Ignored by swarm")]),e._v("]")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("depends_on")]),e._v(" ["),s("em",[e._v("Ignored by swarm")]),e._v("]")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("dns")]),e._v(" ["),s("em",[e._v("Ignored by swarm")]),e._v("]")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("dns_search")]),e._v(" ["),s("em",[e._v("Ignored by swarm")]),e._v("]")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("tmpfs")]),e._v(" ["),s("em",[e._v("Ignored by swarm")]),e._v("]")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("entrypoint")])]),e._v(" "),s("ul",[s("li",[e._v("override default entrypoint")])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("env_file")])]),e._v(" "),s("ul",[s("li",[s("em",[e._v("VAR=VAL")]),e._v("  environment variables from a file")]),e._v(" "),s("li",[e._v("can be single value or list")]),e._v(" "),s("li",[e._v("file path is relative to")]),e._v(" "),s("li",[s("code",[e._v("environment")]),e._v("(see below) variables override variables in "),s("code",[e._v("env_file")])]),e._v(" "),s("li",[s("em",[e._v("VAL")]),e._v(" is same as mentioned including quotes")]),e._v(" "),s("li",[e._v("Incase of same named variables.... last one is used")]),e._v(" "),s("li",[e._v("this variable can be used inside "),s("em",[e._v("container")])]),e._v(" "),s("li",[e._v("this variables cannot be used in "),s("em",[e._v(".yml")])]),e._v(" "),s("li",[e._v("eg:")])]),e._v(" "),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[e._v("    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("services")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("myservice")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("env_file")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" a.env \n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" b.env\n")])])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("environment")])]),e._v(" "),s("ul",[s("li",[e._v("can use "),s("em",[e._v("array or dictionary")])]),e._v(" "),s("li",[s("em",[e._v("Boolean")]),e._v(" values like "),s("em",[e._v("true false yes no")]),e._v(" are inside qoutes\n"),s("ul",[s("li",[e._v("since yml parser makes them "),s("em",[e._v("True False")])])])]),e._v(" "),s("li",[e._v("if no value but "),s("em",[e._v("only key")]),e._v(" then those values are taken from machine in which compose runs")]),e._v(" "),s("li",[e._v("eg:")])]),e._v(" "),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[e._v("    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("environment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("BACK_ENV")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" development\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("SHOW")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" `true`\n        SESSION_SECRET\n")])])]),s("ul",[s("li",[e._v("eg:")])]),e._v(" "),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[e._v("    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("environment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" BACK_ENV=development\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" SHOW=true \n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" SESSION_SECRET\n\n")])])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("expose")])]),e._v(" "),s("ul",[s("li",[e._v("expose but not published")]),e._v(" "),s("li",[e._v("access to linked services only")]),e._v(" "),s("li",[e._v("only internal ports")]),e._v(" "),s("li",[e._v("rg")])]),e._v(" "),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[e._v("    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("expose")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" \n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"3000"')]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"8000"')]),e._v("\n")])])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("external_links")]),e._v("["),s("em",[e._v("Ignored by swarm")]),e._v("]")]),e._v(" "),s("ul",[s("li",[e._v("use networks instead")])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("extra_hosts")])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("healthcheck")])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("image")])]),e._v(" "),s("ul",[s("li",[e._v("eg : "),s("em",[e._v("image: redis")])]),e._v(" "),s("li",[e._v("eg : "),s("em",[e._v("image: ubuntu:14.04")])])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("isolation")])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("labels")])]),e._v(" "),s("ul",[s("li",[e._v("adds metadata to containers")])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("links")]),e._v("["),s("em",[e._v("Ignored by swarm")]),e._v("]")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("logging")])]),e._v(" "),s("ul",[s("li",[e._v("logs for services")])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("network_mode")]),e._v(" ["),s("em",[e._v("Ignored by swarm")]),e._v("]")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("networks")])]),e._v(" "),s("ul",[s("li",[e._v("eg:")])]),e._v(" "),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[e._v("    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("services")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("myservice")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("networks")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" myneta\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" yournetb\n")])])]),s("ul",[s("li",[s("p",[s("code",[e._v("ALIASES")])]),e._v(" "),s("ul",[s("li",[e._v("alternative hostnames for this service on network")]),e._v(" "),s("li",[e._v("other containers on same network (to connect this service's container)\n"),s("ul",[s("li",[e._v("can use service "),s("em",[e._v("name")]),e._v(" OR")]),e._v(" "),s("li",[e._v("can use "),s("em",[e._v("aliases")])])])]),e._v(" "),s("li",[s("em",[e._v("Scope")]),e._v(" is limited to network")]),e._v(" "),s("li",[e._v("eg:")])]),e._v(" "),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[e._v("    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("services")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("myservice")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("networks")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n                "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("aliases")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n                    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" alias1\n                    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" alias2\n")])])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("IPV4_ADDRESS")]),e._v(" / "),s("code",[e._v("IPV6_ADDRESS")])])])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("pid")])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("ports")])]),e._v(" "),s("ul",[s("li",[e._v("expose ports")]),e._v(" "),s("li",[e._v("a] "),s("em",[e._v("SHORT SYNTAX")]),e._v(" "),s("ul",[s("li",[s("code",[e._v("HOST:CONTAINER")]),e._v(" or just "),s("code",[e._v("CONTAINER")]),e._v(" which will choose random host port")]),e._v(" "),s("li",[e._v("eg:")])]),e._v(" "),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[e._v("    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("ports")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"3000"')]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"3000:3005"')]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"8000:8000"')]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"9090-9091:8080-8081"')]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"49100:22"')]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"127.0.0.1:8001:8001"')]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"127.0.0.1:5000-5010:5000-5010"')]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"6060:6060/udp"')]),e._v("\n")])])])]),e._v(" "),s("li",[e._v("b] "),s("em",[e._v("LONG SYNTAX")]),e._v(" [version 3.2]\n"),s("ul",[s("li",[s("em",[e._v("target")]),e._v(" , "),s("em",[e._v("published")]),e._v(", "),s("em",[e._v("protocol")]),e._v(", "),s("em",[e._v("mode")])])])])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("secrets")])]),e._v(" "),s("ul",[s("li",[e._v("grant access to service to use "),s("em",[e._v("secrets")])]),e._v(" "),s("li",[s("em",[e._v("secrets")]),e._v(" must be already defined in top level of yml in order to add to service in yml")]),e._v(" "),s("li",[s("em",[e._v("SHORT SYNTAX")]),e._v(" "),s("ul",[s("li",[e._v("just secret name")]),e._v(" "),s("li",[e._v("container gets access to secrets")]),e._v(" "),s("li",[e._v("mounts at "),s("code",[e._v("/run/secrets/<secret_name>")]),e._v(" within container")]),e._v(" "),s("li",[s("em",[e._v("external")]),e._v(" means already defined in docker by "),s("em",[e._v("docker secret create")]),e._v(" OR "),s("em",[e._v("other stacks")])]),e._v(" "),s("li",[e._v("eg")])]),e._v(" "),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[e._v("    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"3.1"')]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("services")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("redis")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("image")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" redis"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("latest\n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("deploy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" \n                "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("replicas")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v(" \n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("secrets")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" my_secret\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" my_other_secret\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("secrets")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("my_secret")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("file")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" ./my_secret.txt \n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("my_other_secret")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("external")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[e._v("true")]),e._v("\n")])])])]),e._v(" "),s("li",[s("em",[e._v("LONG SYNTAX")])])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("security_opt")]),e._v("["),s("em",[e._v("Ignored by swarm")]),e._v("]")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("stop_grace_period")]),e._v(" ["),s("em",[e._v("Ignored by swarm")]),e._v("]")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("sysctls")]),e._v(" ["),s("em",[e._v("Ignored by swarm")]),e._v("]")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("ulimits")])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("userns_mode")]),e._v("["),s("em",[e._v("Ignored by swarm")]),e._v("]")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("volumes")]),e._v(" - (Reference)")]),e._v(" "),s("ul",[s("li",[s("em",[e._v("host paths")]),e._v(" or "),s("em",[e._v("named volumes")])]),e._v(" "),s("li",[s("em",[e._v("host path")]),e._v(" in single service without defining in top level "),s("code",[e._v("volumes")]),e._v(" key")]),e._v(" "),s("li",[s("em",[e._v("named volumes")]),e._v(" defined in top-level can be reused in many services")]),e._v(" "),s("li",[s("em",[e._v("named volumes")]),e._v(" are better for swarms")]),e._v(" "),s("li",[e._v("eg:")])]),e._v(" "),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[e._v("    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"3.2"')]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("services")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("web")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("image")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" nginx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("alpine\n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("volumes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" \n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" volume \n                  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("source")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" mydata\n                  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("target")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" /data \n                  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("volume")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n                    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("nocopy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[e._v("true")]),e._v(" \n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" bind \n                  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("source")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" ./static\n                  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("target")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" /opt/app/static\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("db")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("image")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" postgres  \n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("volumes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" \n                 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"/var/run/postgres/postgres.sock:/var/run/postgres/postgres.sock"')]),e._v("\n                 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"dbdata:/var/lib/postgresql/data"')]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("volumes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("mydata")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("dbdata")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n")])])]),s("ul",[s("li",[s("code",[e._v("SHORT SYNTAX")]),e._v(" "),s("ul",[s("li",[s("em",[e._v("HOST:CONTAINER")]),e._v(" OR "),s("em",[e._v("HOST:CONTAINER:ro")])]),e._v(" "),s("li",[e._v("mount a host data using "),s("em",[e._v("yml")]),e._v(" relative paths "),s("code",[e._v(".")]),e._v(" & "),s("code",[e._v("..")])]),e._v(" "),s("li",[e._v("eg:")])]),e._v(" "),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[e._v("    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("volumes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" /var/lib/mysql    "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# give path & engine will create volume")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" /opt/data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("/var/lib/mysql  "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# absolute path")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" ./cache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("/tmp/cache        "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# relative path to yml")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" ~/configs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("/etc/configs/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("ro    "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# relative path to home")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" myvolume"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("/var/lib/mysql       "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# named volumes")]),e._v("\n")])])])]),e._v(" "),s("li",[s("code",[e._v("LONG SYNTAX")])])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("restart")])]),e._v(" "),s("ul",[s("li",[s("em",[e._v("no")]),e._v(" , "),s("em",[e._v("always")]),e._v(" , "),s("em",[e._v("on-failure")]),e._v(" , "),s("em",[e._v("unless-stopped")])])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("domainname, hostname, ipc, mac_address, privileged, read_only, shm_size, stdin_open, tty, user, working_dir")])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("networks")]),e._v(" (Reference)")]),e._v(" "),s("ul",[s("li",[s("code",[e._v("driver")]),e._v(" "),s("ul",[s("li",[s("em",[e._v("bridge")]),e._v(" on single host")]),e._v(" "),s("li",[s("em",[e._v("overlay")]),e._v(" on swarm")])])]),e._v(" "),s("li",[s("code",[e._v("driver_opt")]),e._v(" "),s("ul",[s("li",[e._v("driver dependent options")])])]),e._v(" "),s("li",[s("code",[e._v("attachable")]),e._v(" "),s("ul",[s("li",[e._v("for "),s("em",[e._v("overlays")]),e._v(" only")]),e._v(" "),s("li",[e._v("if "),s("em",[e._v("true")]),e._v(" then standalone container can attach to this network")]),e._v(" "),s("li",[e._v("And this container can connect with "),s("em",[e._v("service")]),e._v(" & other "),s("em",[e._v("standalone containers")]),e._v(" already attached to this network")]),e._v(" "),s("li",[e._v("eg:")])]),e._v(" "),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[e._v("    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("networks")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("mynet")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("driver")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" overlay\n            "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("attachable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[e._v("true")]),e._v("\n")])])])])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("ipam")]),e._v(" [version 2]")])])]),e._v(" "),s("h1",{attrs:{id:"keywords-notes-commands-used-in-file"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#keywords-notes-commands-used-in-file"}},[e._v("#")]),e._v(" keywords & notes & commands used in file")]),e._v(" "),s("ul",[s("li",[s("p",[e._v("no tabs. Only 2 space")])]),e._v(" "),s("li"),e._v(" "),s("li",[s("p",[e._v('version: "3"      # swarm mode')]),e._v(" "),s("p",[e._v("docker stack deploy     # version 3 with swarm mode\ndocker-compose up       # version 3 with Non-swarm mode\ndocker-compose down")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);