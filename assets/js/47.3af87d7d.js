(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{412:function(t,s,a){"use strict";a.r(s);var e=a(45),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"authentication"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#authentication"}},[t._v("#")]),t._v(" AUTHENTICATION")]),t._v(" "),a("h2",{attrs:{id:"introduction"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#introduction"}},[t._v("#")]),t._v(" # Introduction")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("php artisan ui vue --auth")])]),t._v(" "),a("li",[a("code",[t._v("config/auth.php")])]),t._v(" "),a("li",[t._v("Auth is Based on\n"),a("ul",[a("li",[a("code",[t._v("guards")]),t._v(" - "),a("em",[t._v("(session)")])]),t._v(" "),a("li",[a("code",[t._v("providers")]),t._v(" - "),a("em",[t._v("(eloquent/query with user table)")])])])]),t._v(" "),a("li",[a("code",[t._v("App\\User")]),t._v(" table model is used")])]),t._v(" "),a("h2",{attrs:{id:"auth-quickstart"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#auth-quickstart"}},[t._v("#")]),t._v(" # Auth Quickstart")]),t._v(" "),a("ul",[a("li",[a("p",[a("em",[t._v("Controllers")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("HomeController")])]),t._v(" "),a("li",[a("code",[t._v("App\\Http\\Controllers\\Auth")]),t._v(" "),a("ul",[a("li",[a("em",[t._v("Register, Login, ForgotPassword, ResetPassword")])]),t._v(" "),a("li",[a("code",[t._v("$redirectTo")]),t._v(" & "),a("code",[t._v("redirect()")]),t._v(" (Also "),a("em",[t._v("RedirectIfAuthenticated")]),t._v(" middleware)")])])])])]),t._v(" "),a("li",[a("p",[a("em",[t._v("Routes")])]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("Auth")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("routes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("Auth")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("routes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("“register” "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" “"),a("span",{pre:!0,attrs:{class:"token constant boolean"}},[t._v("false")]),t._v("”"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# If not needed")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[a("em",[t._v("Views")]),t._v(" : "),a("code",[t._v("resources/views/auth & layouts")])])]),t._v(" "),a("li",[a("p",[a("em",[t._v("Authenticating")])]),t._v(" "),a("ul",[a("li",[t._v("Redirect after login - "),a("code",[t._v('const HOME = "/home"')]),t._v(" in "),a("code",[t._v("RouteServiceProvider")])]),t._v(" "),a("li",[a("em",[t._v("Username")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("“email”")]),t._v(" field is default")]),t._v(" "),a("li",[t._v("Can change field in "),a("em",[t._v("loginController")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("public function username() { return “username”; }")])])])])])]),t._v(" "),a("li",[a("em",[t._v("Guard")]),t._v(" "),a("ul",[a("li",[t._v("In "),a("em",[t._v("Login, Register, ResetPassword")]),t._v(" controllers")]),t._v(" "),a("li",[a("code",[t._v("public function guard() { return Auth::guard (“name”); }")])])])]),t._v(" "),a("li",[a("em",[t._v("Validation/Storage Customization")]),t._v(" "),a("ul",[a("li",[t._v("How to register new Users")]),t._v(" "),a("li",[a("em",[t._v("RegisterController")]),t._v(" has methods "),a("code",[t._v("validator() & create()")])])])])])]),t._v(" "),a("li",[a("p",[a("em",[t._v("Retrieve auth users")])]),t._v(" "),a("ul",[a("li",[t._v("Better use Middleware")])]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("Auth")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("check")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# OR")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name type-declaration"}},[t._v("Request")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$request")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$current_user")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$request")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[a("em",[t._v("Protecting Routes - use middleware auth")])]),t._v(" "),a("ul",[a("li",[t._v("Route ex - "),a("code",[t._v("Route::get(url, callback)->middleware('auth')")])]),t._v(" "),a("li",[t._v("controller ex - "),a("code",[t._v("$this->middleware('auth');")]),t._v(" in "),a("code",[t._v("__construct()")])])])]),t._v(" "),a("li",[a("p",[a("em",[t._v("Password Confirmation")])]),t._v(" "),a("ul",[a("li",[t._v("Confirm password before something doing something important like changing password, moneysending, etc")]),t._v(" "),a("li",[a("code",[t._v("Route::get(url, callback)->middleware(['auth', 'password.confirm'])")])]),t._v(" "),a("li",[t._v("3 hours gap is given inbetween asking again")])])]),t._v(" "),a("li",[a("p",[a("em",[t._v("Login Throttling")])]),t._v(" "),a("ul",[a("li",[t._v("Already in "),a("code",[t._v("LoginController")])]),t._v(" "),a("li",[t._v("Based on unique username & IP address")])])])]),t._v(" "),a("h2",{attrs:{id:"manually-auth-users"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#manually-auth-users"}},[t._v("#")]),t._v(" # Manually auth users")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Incase manual we must ignore default controllers")])]),t._v(" "),a("li",[a("p",[a("em",[t._v("attempt()")])]),t._v(" "),a("ul",[a("li",[a("p",[a("em",[t._v("Credentials")])]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$credentials")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$request")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("only ")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("‘email’"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ‘password’"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("Auth")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("attempt ")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$credentials")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("redirect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("intended ")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("“dashboard”"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[a("em",[t._v("Specific guard")]),t._v(" : "),a("code",[t._v("Auth::guard (‘admin’)->attempt ($credentials)")])])])])]),t._v(" "),a("li",[a("p",[a("em",[t._v("Logout")])]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("Auth")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("logout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("logoutCurrentDevices")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("logoutOtherDevices")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[a("em",[t._v("Remembering Users")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("remember_token")]),t._v(" in "),a("em",[t._v("users")]),t._v(" table as hash values ("),a("em",[t._v("LoginController")]),t._v(" already has this)")]),t._v(" "),a("li",[a("code",[t._v("if(Auth::attempt ($credentials, $remember)){...}")])]),t._v(" "),a("li",[a("code",[t._v("if(Auth::viaRemember()){...}")])])])]),t._v(" "),a("li",[a("p",[a("em",[t._v("Other authentication Methods")])]),t._v(" "),a("ul",[a("li",[t._v("Needs "),a("em",[t._v("Authenticable")]),t._v(" contract ("),a("code",[t._v("App\\User")]),t._v(" implements this contract)")])]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# User Instance")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("Auth")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("login ")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# remember me checked")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Using ID primaty key")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("Auth")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("loginUsingId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# UserOnce - Login just 1 time - No sessions or cookies")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("Auth")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("once")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$credentials")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])]),t._v(" "),a("h2",{attrs:{id:"http-basic-auth"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http-basic-auth"}},[t._v("#")]),t._v(" # Http Basic auth")]),t._v(" "),a("ul",[a("li",[a("em",[t._v("Browser Prompt")]),t._v(" is used. So dedicated login view pages required")]),t._v(" "),a("li",[t._v("Use "),a("code",[t._v("auth.basic")]),t._v(" middleware")])]),t._v(" "),a("h2",{attrs:{id:"adding-custom-guards-providers"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#adding-custom-guards-providers"}},[t._v("#")]),t._v(" # Adding custom Guards & Providers")]),t._v(" "),a("h2",{attrs:{id:"events"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#events"}},[t._v("#")]),t._v(" # Events")]),t._v(" "),a("ul",[a("li",[t._v("This events are raised by authentication process")]),t._v(" "),a("li",[a("em",[t._v("EventServiceProvider")])]),t._v(" "),a("li",[a("em",[t._v("Registered, Login, Attempting, Authenticated, Failed, Logout, Lockout, PasswordReset")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);