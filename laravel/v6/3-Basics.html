<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>BASICS | TechNotes</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="This Are My Notes">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/technotes/assets/css/0.styles.9dcdc9ce.css" as="style"><link rel="preload" href="/technotes/assets/js/app.8104ebb8.js" as="script"><link rel="preload" href="/technotes/assets/js/2.caedfb41.js" as="script"><link rel="preload" href="/technotes/assets/js/45.bbeeb042.js" as="script"><link rel="prefetch" href="/technotes/assets/js/10.cd6f20a6.js"><link rel="prefetch" href="/technotes/assets/js/100.279a9072.js"><link rel="prefetch" href="/technotes/assets/js/101.997cf7be.js"><link rel="prefetch" href="/technotes/assets/js/102.1b1d5ddd.js"><link rel="prefetch" href="/technotes/assets/js/103.392e394b.js"><link rel="prefetch" href="/technotes/assets/js/104.52362a08.js"><link rel="prefetch" href="/technotes/assets/js/105.1d61a10e.js"><link rel="prefetch" href="/technotes/assets/js/106.0ccbe98d.js"><link rel="prefetch" href="/technotes/assets/js/107.8a8891f6.js"><link rel="prefetch" href="/technotes/assets/js/108.f97b9fc5.js"><link rel="prefetch" href="/technotes/assets/js/109.53af78e7.js"><link rel="prefetch" href="/technotes/assets/js/11.e97b9008.js"><link rel="prefetch" href="/technotes/assets/js/110.eba8e4a8.js"><link rel="prefetch" href="/technotes/assets/js/111.5a6e159d.js"><link rel="prefetch" href="/technotes/assets/js/112.df01fa26.js"><link rel="prefetch" href="/technotes/assets/js/113.78ee7edc.js"><link rel="prefetch" href="/technotes/assets/js/114.897d8424.js"><link rel="prefetch" href="/technotes/assets/js/115.42a6b59a.js"><link rel="prefetch" href="/technotes/assets/js/116.b79d8561.js"><link rel="prefetch" href="/technotes/assets/js/117.c16fe2d1.js"><link rel="prefetch" href="/technotes/assets/js/118.1fcc3485.js"><link rel="prefetch" href="/technotes/assets/js/119.a33ada80.js"><link rel="prefetch" href="/technotes/assets/js/12.9a00424a.js"><link rel="prefetch" href="/technotes/assets/js/120.76f211de.js"><link rel="prefetch" href="/technotes/assets/js/121.629643ae.js"><link rel="prefetch" href="/technotes/assets/js/122.68f73485.js"><link rel="prefetch" href="/technotes/assets/js/123.33cd021c.js"><link rel="prefetch" href="/technotes/assets/js/124.a81a84a8.js"><link rel="prefetch" href="/technotes/assets/js/125.0e39b1db.js"><link rel="prefetch" href="/technotes/assets/js/13.b6f0f7ab.js"><link rel="prefetch" href="/technotes/assets/js/14.266a7a2b.js"><link rel="prefetch" href="/technotes/assets/js/15.b7921887.js"><link rel="prefetch" href="/technotes/assets/js/16.ccd43b1e.js"><link rel="prefetch" href="/technotes/assets/js/17.113da873.js"><link rel="prefetch" href="/technotes/assets/js/18.d1f04f6f.js"><link rel="prefetch" href="/technotes/assets/js/19.47367321.js"><link rel="prefetch" href="/technotes/assets/js/20.e00a6f18.js"><link rel="prefetch" href="/technotes/assets/js/21.e4cb8c08.js"><link rel="prefetch" href="/technotes/assets/js/22.f74bf51d.js"><link rel="prefetch" href="/technotes/assets/js/23.94d192f0.js"><link rel="prefetch" href="/technotes/assets/js/24.7fad591d.js"><link rel="prefetch" href="/technotes/assets/js/25.3a54ea06.js"><link rel="prefetch" href="/technotes/assets/js/26.da1e8bec.js"><link rel="prefetch" href="/technotes/assets/js/27.e68284e7.js"><link rel="prefetch" href="/technotes/assets/js/28.a558c139.js"><link rel="prefetch" href="/technotes/assets/js/29.88cbe547.js"><link rel="prefetch" href="/technotes/assets/js/3.2769445e.js"><link rel="prefetch" href="/technotes/assets/js/30.11d87982.js"><link rel="prefetch" href="/technotes/assets/js/31.aeead8e9.js"><link rel="prefetch" href="/technotes/assets/js/32.d445d1fb.js"><link rel="prefetch" href="/technotes/assets/js/33.ec5cbdf7.js"><link rel="prefetch" href="/technotes/assets/js/34.7f3302d4.js"><link rel="prefetch" href="/technotes/assets/js/35.1a7ce302.js"><link rel="prefetch" href="/technotes/assets/js/36.49bdadae.js"><link rel="prefetch" href="/technotes/assets/js/37.36821112.js"><link rel="prefetch" href="/technotes/assets/js/38.f65f4627.js"><link rel="prefetch" href="/technotes/assets/js/39.c1665451.js"><link rel="prefetch" href="/technotes/assets/js/4.0aec5cc0.js"><link rel="prefetch" href="/technotes/assets/js/40.3c1f0ace.js"><link rel="prefetch" href="/technotes/assets/js/41.76268252.js"><link rel="prefetch" href="/technotes/assets/js/42.61c3b5d8.js"><link rel="prefetch" href="/technotes/assets/js/43.eef10551.js"><link rel="prefetch" href="/technotes/assets/js/44.f0f4bc2e.js"><link rel="prefetch" href="/technotes/assets/js/46.73946476.js"><link rel="prefetch" href="/technotes/assets/js/47.3af87d7d.js"><link rel="prefetch" href="/technotes/assets/js/48.23d60ecc.js"><link rel="prefetch" href="/technotes/assets/js/49.9dc90dc8.js"><link rel="prefetch" href="/technotes/assets/js/5.752af569.js"><link rel="prefetch" href="/technotes/assets/js/50.8e52a3eb.js"><link rel="prefetch" href="/technotes/assets/js/51.654e7405.js"><link rel="prefetch" href="/technotes/assets/js/52.623485d0.js"><link rel="prefetch" href="/technotes/assets/js/53.efb7ad6a.js"><link rel="prefetch" href="/technotes/assets/js/54.0ad2f7f1.js"><link rel="prefetch" href="/technotes/assets/js/55.8b668558.js"><link rel="prefetch" href="/technotes/assets/js/56.12f3f821.js"><link rel="prefetch" href="/technotes/assets/js/57.52e3406f.js"><link rel="prefetch" href="/technotes/assets/js/58.574ff9e6.js"><link rel="prefetch" href="/technotes/assets/js/59.9d1f123b.js"><link rel="prefetch" href="/technotes/assets/js/6.32abcfcb.js"><link rel="prefetch" href="/technotes/assets/js/60.e2f235f0.js"><link rel="prefetch" href="/technotes/assets/js/61.e68a5945.js"><link rel="prefetch" href="/technotes/assets/js/62.4dbf5f15.js"><link rel="prefetch" href="/technotes/assets/js/63.929030ce.js"><link rel="prefetch" href="/technotes/assets/js/64.efefc0a8.js"><link rel="prefetch" href="/technotes/assets/js/65.a47b956c.js"><link rel="prefetch" href="/technotes/assets/js/66.7a299204.js"><link rel="prefetch" href="/technotes/assets/js/67.646e793b.js"><link rel="prefetch" href="/technotes/assets/js/68.eb547408.js"><link rel="prefetch" href="/technotes/assets/js/69.fc412058.js"><link rel="prefetch" href="/technotes/assets/js/7.ac0d8c58.js"><link rel="prefetch" href="/technotes/assets/js/70.4002346f.js"><link rel="prefetch" href="/technotes/assets/js/71.3d1e2ed5.js"><link rel="prefetch" href="/technotes/assets/js/72.e8f672bc.js"><link rel="prefetch" href="/technotes/assets/js/73.7b335297.js"><link rel="prefetch" href="/technotes/assets/js/74.36b0ab27.js"><link rel="prefetch" href="/technotes/assets/js/75.cddd03f2.js"><link rel="prefetch" href="/technotes/assets/js/76.3a34f2da.js"><link rel="prefetch" href="/technotes/assets/js/77.64ad8010.js"><link rel="prefetch" href="/technotes/assets/js/78.5b13e2bb.js"><link rel="prefetch" href="/technotes/assets/js/79.b948bb44.js"><link rel="prefetch" href="/technotes/assets/js/8.be5ada8e.js"><link rel="prefetch" href="/technotes/assets/js/80.0fc474be.js"><link rel="prefetch" href="/technotes/assets/js/81.9d3cd6c8.js"><link rel="prefetch" href="/technotes/assets/js/82.b19a306b.js"><link rel="prefetch" href="/technotes/assets/js/83.754da28b.js"><link rel="prefetch" href="/technotes/assets/js/84.563f388d.js"><link rel="prefetch" href="/technotes/assets/js/85.0706c016.js"><link rel="prefetch" href="/technotes/assets/js/86.122423e8.js"><link rel="prefetch" href="/technotes/assets/js/87.ce8632e5.js"><link rel="prefetch" href="/technotes/assets/js/88.ed52ab7f.js"><link rel="prefetch" href="/technotes/assets/js/89.0877c3c1.js"><link rel="prefetch" href="/technotes/assets/js/9.31e82567.js"><link rel="prefetch" href="/technotes/assets/js/90.8da3219b.js"><link rel="prefetch" href="/technotes/assets/js/91.b474c785.js"><link rel="prefetch" href="/technotes/assets/js/92.ee6dcaed.js"><link rel="prefetch" href="/technotes/assets/js/93.4a4cb662.js"><link rel="prefetch" href="/technotes/assets/js/94.459bca48.js"><link rel="prefetch" href="/technotes/assets/js/95.b0c565c1.js"><link rel="prefetch" href="/technotes/assets/js/96.13f144f3.js"><link rel="prefetch" href="/technotes/assets/js/97.c82c345f.js"><link rel="prefetch" href="/technotes/assets/js/98.df4fb20c.js"><link rel="prefetch" href="/technotes/assets/js/99.4f6c206b.js">
    <link rel="stylesheet" href="/technotes/assets/css/0.styles.9dcdc9ce.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/technotes/" class="home-link router-link-active"><!----> <span class="site-name">TechNotes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/technotes/keyboard-shortcuts/" class="nav-link">
  Keyboard-shortcuts
</a></div><div class="nav-item"><a href="/technotes/surveys/" class="nav-link">
  Surveys
</a></div><div class="nav-item"><a href="/technotes/resources/" class="nav-link">
  Resources
</a></div><div class="nav-item"><a href="https://github.com/umeshmk" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/technotes/keyboard-shortcuts/" class="nav-link">
  Keyboard-shortcuts
</a></div><div class="nav-item"><a href="/technotes/surveys/" class="nav-link">
  Surveys
</a></div><div class="nav-item"><a href="/technotes/resources/" class="nav-link">
  Resources
</a></div><div class="nav-item"><a href="https://github.com/umeshmk" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Laravel (Deprecated)</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/technotes/laravel/v6/1-GettingStarted.html" class="sidebar-link">GETTING STARTED</a></li><li><a href="/technotes/laravel/v6/2-ArchitecturalConcepts.html" class="sidebar-link">ARCHITECTURAL CONCEPTS</a></li><li><a href="/technotes/laravel/v6/3-Basics.html" aria-current="page" class="active sidebar-link">BASICS</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/technotes/laravel/v6/3-Basics.html#routes" class="sidebar-link"># ROUTES</a></li><li class="sidebar-sub-header"><a href="/technotes/laravel/v6/3-Basics.html#middlewares" class="sidebar-link"># MIDDLEWARES</a></li><li class="sidebar-sub-header"><a href="/technotes/laravel/v6/3-Basics.html#csrf-protection" class="sidebar-link"># CSRF PROTECTION</a></li><li class="sidebar-sub-header"><a href="/technotes/laravel/v6/3-Basics.html#controllers" class="sidebar-link"># CONTROLLERS</a></li><li class="sidebar-sub-header"><a href="/technotes/laravel/v6/3-Basics.html#requests" class="sidebar-link"># REQUESTS</a></li><li class="sidebar-sub-header"><a href="/technotes/laravel/v6/3-Basics.html#responses" class="sidebar-link"># RESPONSES</a></li><li class="sidebar-sub-header"><a href="/technotes/laravel/v6/3-Basics.html#views" class="sidebar-link"># VIEWS</a></li><li class="sidebar-sub-header"><a href="/technotes/laravel/v6/3-Basics.html#url-generations" class="sidebar-link"># URL GENERATIONS</a></li><li class="sidebar-sub-header"><a href="/technotes/laravel/v6/3-Basics.html#sessions" class="sidebar-link"># SESSIONS</a></li><li class="sidebar-sub-header"><a href="/technotes/laravel/v6/3-Basics.html#validation" class="sidebar-link"># VALIDATION</a></li><li class="sidebar-sub-header"><a href="/technotes/laravel/v6/3-Basics.html#error-handling" class="sidebar-link"># ERROR HANDLING</a></li><li class="sidebar-sub-header"><a href="/technotes/laravel/v6/3-Basics.html#logging" class="sidebar-link"># LOGGING</a></li></ul></li><li><a href="/technotes/laravel/v6/4-Frontend.html" class="sidebar-link">FRONTEND</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Security</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/technotes/laravel/v6/5-Security/1-Authentication.html" class="sidebar-link">AUTHENTICATION</a></li><li><a href="/technotes/laravel/v6/5-Security/2-Api_authentication_incomplete.html" class="sidebar-link">API AUTHENTICATION</a></li><li><a href="/technotes/laravel/v6/5-Security/3-Authorization.html" class="sidebar-link">AUTHORIZATION</a></li><li><a href="/technotes/laravel/v6/5-Security/Others.html" class="sidebar-link">OTHERS</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Digging deeper</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/technotes/laravel/v6/6-Digging-deeper/1-Artisan-console.html" class="sidebar-link">ARTISAN CONSOLE</a></li><li><a href="/technotes/laravel/v6/6-Digging-deeper/3-Cache+Collections.html" class="sidebar-link">CACHE</a></li><li><a href="/technotes/laravel/v6/6-Digging-deeper/4-Events.html" class="sidebar-link">EVENTS</a></li><li><a href="/technotes/laravel/v6/6-Digging-deeper/7-Filestorage+Mail.html" class="sidebar-link">FILE STORAGE</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Database</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/technotes/laravel/v6/7-Database.html" class="sidebar-link">DATABASE</a></li><li><a href="/technotes/laravel/v6/8-EloquentORM.html" class="sidebar-link">ELOQUENT</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="basics"><a href="#basics" class="header-anchor">#</a> BASICS</h1> <h2 id="routes"><a href="#routes" class="header-anchor">#</a> # ROUTES</h2> <ul><li><p>Folder <code>routes</code> with 4 files <em>[web / api / console / channel]</em></p></li> <li><p><strong>App\Providers\RouteServiceProvider</strong></p> <ul><li>Uses <em>web</em> middleware to <code>routes/web,php</code></li> <li>Uses <code>/api</code> prefix to url with <em>api</em> middleware to <code>routes/api.php</code></li></ul></li> <li><p><strong>Methods</strong></p> <div class="language-php extra-class"><pre class="language-php"><code>  <span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get </span><span class="token punctuation">(</span>“url”<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">[</span>get<span class="token punctuation">,</span> post<span class="token punctuation">,</span> put<span class="token punctuation">,</span> patch<span class="token punctuation">,</span> delete<span class="token punctuation">,</span> options<span class="token punctuation">]</span>
       <span class="token operator">::</span><span class="token keyword">match</span> <span class="token punctuation">(</span><span class="token punctuation">[</span>‘get’<span class="token punctuation">,</span> ‘post’<span class="token punctuation">]</span><span class="token punctuation">,</span> “url”<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token operator">::</span><span class="token function">any</span><span class="token punctuation">(</span>“url”<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token operator">::</span><span class="token function">except</span><span class="token punctuation">(</span><span class="token punctuation">[</span>‘get’<span class="token punctuation">,</span> ‘post’<span class="token punctuation">]</span><span class="token punctuation">,</span> “url”<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token operator">::</span><span class="token function">redirect </span><span class="token punctuation">(</span>‘<span class="token operator">/</span>here’<span class="token punctuation">,</span> ‘<span class="token operator">/</span>there’<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token operator">::</span><span class="token function">redirect </span><span class="token punctuation">(</span>‘<span class="token operator">/</span>here’<span class="token punctuation">,</span> ‘<span class="token operator">/</span>there’<span class="token punctuation">,</span> statusCodeLike301<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token operator">::</span><span class="token function">view </span><span class="token punctuation">(</span>‘ url’<span class="token punctuation">,</span> ‘viewFile ‘<span class="token punctuation">,</span> <span class="token punctuation">[</span>“key” <span class="token operator">=&gt;</span> “value”<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p><strong>CSRF Protection</strong> (in Forms) [<em>post, put, delete</em>]</p> <ul><li><code>@csrf</code></li></ul></li> <li><p><strong>Route Parameters</strong> (Note: cannot use ‘-’ for parameter name)</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get </span><span class="token punctuation">(</span>“user<span class="token operator">/</span><span class="token punctuation">{</span> id <span class="token punctuation">}</span><span class="token operator">/</span>photos<span class="token operator">/</span><span class="token punctuation">{</span> pid <span class="token punctuation">}</span>”<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">,</span> <span class="token variable">$pid</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> …<span class="token operator">.</span><span class="token operator">.</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token operator">::</span><span class="token function">get </span><span class="token punctuation">(</span>  “user<span class="token operator">/</span><span class="token punctuation">{</span> name<span class="token operator">?</span> <span class="token punctuation">}</span>”<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$name</span> <span class="token operator">=</span> ”Umesh”<span class="token punctuation">)</span> <span class="token punctuation">{</span> …<span class="token operator">.</span><span class="token operator">.</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p><strong>Regular Expression</strong></p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get </span><span class="token punctuation">(</span>“user<span class="token operator">/</span><span class="token punctuation">{</span> id <span class="token punctuation">}</span>”<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> …<span class="token operator">.</span><span class="token operator">.</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">where </span><span class="token punctuation">(</span>“id”<span class="token punctuation">,</span> “<span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">+</span>”<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><em>Global Route Parameter</em> (Applys to all routes parameters with same name)
<ul><li>In <em>RouteServiceProvider</em> method <code>boot()</code></li> <li><code>Route::pattern (‘id’, ‘[0-9]+’);</code></li></ul></li></ul></li> <li><p><strong>Named Routes</strong></p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get </span><span class="token punctuation">(</span>“url”<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">name </span><span class="token punctuation">(</span>“myroute”<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><em>Making urls</em> <ul><li><code>route (“myroute”, [“id” =&gt; 232]);</code></li></ul></li> <li><em>Redirect url</em> <ul><li><code>redirect()-&gt;route (“myroute”, [‘id’ =&gt; 232]);</code></li></ul></li></ul></li> <li><p><strong>Route Group</strong></p> <ul><li>Merged =&gt; <em>Middlewares, where</em></li> <li>Appended =&gt; <em>nameprefixes, namespaces, urlprefixes</em></li></ul> <div class="language-php extra-class"><pre class="language-php"><code>  <span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">middleware </span><span class="token punctuation">(</span><span class="token punctuation">[</span>‘first’<span class="token punctuation">,</span> ‘second’<span class="token punctuation">]</span><span class="token operator">-&gt;</span><span class="token function">group </span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get </span><span class="token punctuation">(</span>‘<span class="token operator">/</span>’<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">post </span><span class="token punctuation">(</span>‘user<span class="token operator">/</span>create’<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token keyword">namespace</span> <span class="token punctuation">(</span>‘Admin’<span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">group </span><span class="token punctuation">(</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> …… <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment"># Namespace of group will be  App\Http\Controllers\Admin</span>

  <span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">domain </span><span class="token punctuation">(</span>‘ <span class="token punctuation">{</span> username <span class="token punctuation">}</span><span class="token operator">.</span>myapp<span class="token operator">.</span>com’<span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">group </span><span class="token punctuation">(</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get </span><span class="token punctuation">(</span>project<span class="token operator">/</span><span class="token punctuation">{</span> id <span class="token punctuation">}</span>’<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$username</span><span class="token punctuation">,</span> <span class="token variable">$id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> …<span class="token operator">.</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">prefix </span><span class="token punctuation">(</span>‘admin’<span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">group </span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> …<span class="token operator">.</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">name </span><span class="token punctuation">(</span>‘admin’<span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">group </span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> …<span class="token operator">.</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p><strong>Route-Model binding</strong></p> <ul><li><em>Implicit</em><div class="language-php extra-class"><pre class="language-php"><code>  <span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get </span><span class="token punctuation">(</span>“users<span class="token operator">/</span><span class="token punctuation">{</span>user<span class="token punctuation">}</span>”<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token class-name class-name-fully-qualified type-declaration">App<span class="token punctuation">\</span>Models<span class="token punctuation">\</span>User</span> <span class="token variable">$user</span><span class="token punctuation">)</span><span class="token punctuation">{</span> …<span class="token operator">.</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><strong>Note</strong> : variable <code>$user</code> and parameter <code>{ user }</code> has same name.</li> <li>If want to use <strong>slug</strong> instead of <strong>id</strong> as default key for <code>users</code> database table
<ul><li>In <code>App/Models/User</code> - <code>public function getRouteKeyName() { return “slug”; }</code></li></ul></li></ul></li> <li><em>Explicit</em> <ul><li>Same as Implicit but adding In <em>RouteServiceProviders</em> method <code>boot()</code></li> <li><code>Route::model(‘user’, ‘App\Models\User::class);</code></li></ul></li></ul></li> <li><p><strong>Fallback Route</strong> (Always at end of all routes)</p> <div class="language-php extra-class"><pre class="language-php"><code>  <span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">fallback </span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p><strong>Rate Limiting</strong></p> <ul><li>Throttle middleware is to be assigned to <em>route / group</em></li></ul> <div class="language-php extra-class"><pre class="language-php"><code>  <span class="token comment"># throttle:60,1 =&gt; 60 request / 1 minute</span>
  <span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">middleware </span><span class="token punctuation">(</span>‘<span class="token argument-name">auth</span><span class="token punctuation">:</span>api’<span class="token punctuation">,</span> ‘<span class="token argument-name">throttle</span><span class="token punctuation">:</span><span class="token number">60</span><span class="token punctuation">,</span><span class="token number">1</span>’<span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token operator">.</span><span class="token operator">.</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p><strong>Form method spoofing</strong></p> <ul><li><code>@method(‘put’)</code></li></ul></li> <li><p><strong>Accessing current route</strong></p> <ul><li><code>Route::current();</code> <ul><li><code>[current(), currentRouteName(), currentRouteAction()]</code></li></ul></li></ul> <h2 id="middlewares"><a href="#middlewares" class="header-anchor">#</a> # MIDDLEWARES</h2></li> <li><p><strong>Folder</strong> =&gt; <code>app/Http/Middleware</code></p></li> <li><p><strong>Command</strong> =&gt; <code>php artisan make:middleware CheckAge</code></p></li> <li><p><strong>Register</strong> =&gt; <code>app/Http/Kernel.php</code></p> <ul><li><em>Global Middlewares</em> =&gt; <code>$middleware</code></li> <li><em>Individual route by adding key name</em> =&gt; <code>$routeMiddleware</code></li> <li><em>web / api routes group</em> =&gt; <code>$middlewareGroups</code></li> <li><em>Sorting middleware</em> =&gt; <code>$middlewarePriority</code></li></ul></li> <li><p><strong>Run</strong> =&gt; <code>handle()</code> in middleware</p> <ul><li><em>Before request</em><div class="language-php extra-class"><pre class="language-php"><code>  <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">handle </span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token punctuation">,</span> <span class="token class-name type-declaration">Closure</span> <span class="token variable">$next</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment"># do work here</span>
    <span class="token keyword">return</span> <span class="token variable">$next</span> <span class="token punctuation">(</span><span class="token variable">$request</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div></li> <li><em>After request</em><div class="language-php extra-class"><pre class="language-php"><code>  <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">handle </span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token punctuation">,</span> <span class="token class-name type-declaration">Closure</span> <span class="token variable">$next</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token variable">$response</span> <span class="token operator">=</span> <span class="token variable">$next</span> <span class="token punctuation">(</span><span class="token variable">$request</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment"># do work here</span>
    <span class="token keyword">return</span> <span class="token variable">$response</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div></li></ul></li></ul> <h2 id="csrf-protection"><a href="#csrf-protection" class="header-anchor">#</a> # CSRF PROTECTION</h2> <ul><li><strong>CSRF</strong> =&gt; <em>Cross-site request forgery</em> <ul><li><code>VerifyCsrfToken</code> Middleware added in <code>web</code> middleware group.</li> <li>Unauthorized commands by authenticated user</li></ul></li> <li>Laravel automatically generates <em>csrf-token</em> for each active session</li> <li><strong>Blade directive in each form</strong> =&gt; <code>@csrf</code></li> <li><strong>Exclude some URI</strong> <ul><li>In <code>VerifyCsrfToken</code> =&gt; <code>$except</code></li></ul></li> <li><strong>x-csrf-token</strong> (Ajax requests)
<ul><li><em>Add</em> =&gt;</li></ul> <div class="language-php extra-class"><pre class="language-php"><code><span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string double-quoted-string">&quot;csrf-token&quot;</span> content<span class="token operator">=</span><span class="token string double-quoted-string">&quot;{{ csrf_token() }}&quot;</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li><em>Axios HTTP Library</em> <ul><li>Default library by laravel</li> <li><code>csrf</code> is applied to all ajax request in <code>resources/js/bootstrap.js</code></li></ul></li> <li><em>Jquery</em><div class="language-js extra-class"><pre class="language-js"><code>$<span class="token punctuation">.</span><span class="token function">ajaxSetup</span> <span class="token punctuation">(</span><span class="token punctuation">[</span>
  headers <span class="token operator">:</span> <span class="token punctuation">{</span>
    ‘<span class="token constant">X</span><span class="token operator">-</span><span class="token constant">CSRF</span><span class="token operator">-</span><span class="token constant">TOKEN</span>’ <span class="token operator">:</span> <span class="token function">$</span><span class="token punctuation">(</span>‘meta<span class="token punctuation">[</span>name <span class="token operator">=</span> “csrf<span class="token operator">-</span>token”<span class="token punctuation">]</span>’<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span>‘content’<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul></li> <li><strong>x-xsrf-token</strong> <ul><li>Csrf stored in <em>cookie</em> having <code>“XSRF-TOKEN”</code> key</li> <li><em>Angular, Axios, etc</em> <strong>automatically</strong> uses this key to set the <code>x-xsrf-token</code> header</li></ul></li></ul> <h2 id="controllers"><a href="#controllers" class="header-anchor">#</a> # CONTROLLERS</h2> <ul><li><p><strong>Path</strong> : <code>app/Http/Controllers</code></p></li> <li><p>Extends <strong>Base Controller</strong> (optional) provide methods like</p> <ul><li><code>middleware(), validate(), dispatch()</code></li></ul></li> <li><p><strong>Use</strong></p> <div class="language-php extra-class"><pre class="language-php"><code>  <span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get </span><span class="token punctuation">(</span>“uri”<span class="token punctuation">,</span> “Media\PhotoController@index“<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p><strong>Invokable</strong></p> <ul><li>Only 1 method <code>__invoke()</code> in controller</li> <li><em>No @action</em><div class="language-php extra-class"><pre class="language-php"><code><span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">get </span><span class="token punctuation">(</span>“url”<span class="token punctuation">,</span> “MyController”<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul></li> <li><p><strong>Middleware</strong></p> <ul><li>In <code>__construct()</code> method we can add middlewares<div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">middleware</span><span class="token punctuation">(</span>‘auth’<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">middleware</span><span class="token punctuation">(</span>‘log’<span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">only</span><span class="token punctuation">(</span>‘index’<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">middleware</span><span class="token punctuation">(</span>‘subscribe’<span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">except</span><span class="token punctuation">(</span>‘index’<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul></li> <li><p><strong>Resource / CRUD</strong></p> <ul><li><p><em>Create</em> - <code>php artisan make:controller MyController --resource</code></p></li> <li><p><em>Only/Except</em></p> <div class="language-php extra-class"><pre class="language-php"><code>  <span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">resource</span><span class="token punctuation">(</span>“url”<span class="token punctuation">,</span> “MyController”<span class="token punctuation">)</span> <span class="token operator">-&gt;</span><span class="token function">only </span><span class="token punctuation">(</span><span class="token punctuation">[</span>‘index’<span class="token punctuation">,</span> ‘create’ <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                         <span class="token operator">-&gt;</span><span class="token function">except </span><span class="token punctuation">(</span><span class="token punctuation">[</span>“destroy”<span class="token punctuation">,</span> “store” <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p><em>Actions</em></p> <div class="language-php extra-class"><pre class="language-php"><code>  <span class="token argument-name">GET</span> 		 <span class="token punctuation">:</span>  <span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">edit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token argument-name">POST</span>		 <span class="token punctuation">:</span>  <span class="token function">store</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token constant">PUT</span><span class="token operator">/</span><span class="token argument-name">PATCH</span>	 <span class="token punctuation">:</span>  <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token argument-name">DELETE</span>	 <span class="token punctuation">:</span>  <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></li> <li><p><em>Urls</em></p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token operator">/</span><span class="token argument-name">photos</span>			        <span class="token punctuation">:</span>	<span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">store</span><span class="token punctuation">(</span><span class="token punctuation">)</span>l
<span class="token operator">/</span>photos<span class="token operator">/</span><span class="token argument-name">create</span> 		    <span class="token punctuation">:</span>	<span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">/</span>photos<span class="token operator">/</span><span class="token punctuation">{</span> photo <span class="token punctuation">}</span><span class="token operator">/</span><span class="token argument-name">edit</span>	<span class="token punctuation">:</span>	<span class="token function">edit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">/</span>photos<span class="token operator">/</span><span class="token punctuation">{</span> photo <span class="token punctuation">}</span>		<span class="token punctuation">:</span>	<span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></li> <li><p><em>Naming</em></p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token class-name static-context">Route</span><span class="token operator">::</span><span class="token function">resource </span><span class="token punctuation">(</span>‘photos’<span class="token punctuation">,</span> ‘PhotoController’<span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">name </span><span class="token punctuation">(</span><span class="token punctuation">[</span>
	‘create’ <span class="token operator">=&gt;</span> ‘photos<span class="token operator">.</span>build’
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p><em>Parameters</em></p> <ul><li><em>Singularized</em> version of <code>Photos</code> ie <code>photo</code></li> <li>Override <code>photos / { photo }</code> with <code>photos / { admin_photo }</code> <ul><li><code>………-&gt;parameters ([‘photos’ =&gt; ‘admin_photo’]);</code></li></ul></li></ul></li> <li><p><em>__contruct()</em></p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">__contruct </span><span class="token punctuation">(</span><span class="token class-name type-declaration">UserRepository</span> <span class="token variable">$user</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">name</span> <span class="token operator">=</span> <span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token property">name</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p><em>Route Parameter &amp; Dependency</em></p> <ul><li>First dependencies then parameters
<ul><li><code>public function store (Request $r, $id) { …… }</code></li></ul></li></ul></li> <li><p><em>Route caching</em></p> <div class="language-php extra-class"><pre class="language-php"><code>php artisan <span class="token argument-name">route</span><span class="token punctuation">:</span>cache
php artisan <span class="token argument-name">route</span><span class="token punctuation">:</span>clear
</code></pre></div></li></ul></li></ul> <h2 id="requests"><a href="#requests" class="header-anchor">#</a> # REQUESTS</h2> <ul><li><p><strong>use Illuminate\Http\Request;</strong></p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">store </span><span class="token punctuation">(</span><span class="token class-name type-declaration">Request</span> <span class="token variable">$request</span><span class="token punctuation">,</span> <span class="token variable">$idparameter</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> …<span class="token operator">.</span><span class="token operator">.</span> <span class="token punctuation">}</span>

<span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span>             <span class="token comment"># foo/bar</span>
        <span class="token operator">-&gt;</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token punctuation">)</span>              <span class="token comment"># http://abc.com/foo/bar</span>
        <span class="token operator">-&gt;</span><span class="token function">fullUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span>          <span class="token comment"># http://abc.com/foo/bar?id=34&amp;name=umesh</span>
        <span class="token operator">-&gt;</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span>           <span class="token comment"># get</span>
        <span class="token operator">-&gt;</span><span class="token function">isMethod</span><span class="token punctuation">(</span>‘post’<span class="token punctuation">)</span>   <span class="token comment"># true/false</span>
</code></pre></div></li> <li><p><strong>Input checking for malicious code</strong></p> <ul><li>Middlewares (global)
<ul><li><em>TrimStrings</em> and <em>ConvertEmptyStringsToNull</em></li></ul></li></ul></li> <li><p><strong>Retrieving Input</strong></p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span><span class="token function">input </span><span class="token punctuation">(</span>“name”<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">-&gt;</span><span class="token function">input </span><span class="token punctuation">(</span>“name”<span class="token punctuation">,</span> “umesh”<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">-&gt;</span><span class="token function">input </span><span class="token punctuation">(</span>“products<span class="token operator">.</span><span class="token number">0.</span>name”<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment"># If arrays then use dot operator</span>
        <span class="token operator">-&gt;</span><span class="token function">Input </span><span class="token punctuation">(</span>“products<span class="token operator">.</span>\<span class="token operator">*</span><span class="token operator">.</span>name”<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">#  Gives array of all names</span>
</code></pre></div></li> <li><p><strong>Retrieving Input (query string)</strong></p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">query </span><span class="token punctuation">(</span>‘name’<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">-&gt;</span><span class="token function">query </span><span class="token punctuation">(</span>‘name’<span class="token punctuation">,</span> ‘Umesh’<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">-&gt;</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                      <span class="token comment"># Gives all query inputs</span>
</code></pre></div></li> <li><p><strong>Retrieving Input (dynamic properties)</strong></p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token property">name</span>                           <span class="token comment"># Any form field names</span>
        <span class="token operator">-&gt;</span><span class="token property">age</span>
</code></pre></div></li> <li><p><strong>Retrieving input (JSON)</strong></p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">input </span><span class="token punctuation">(</span>“user<span class="token operator">.</span>name”<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p><strong>Retrieving Input (portion only)</strong></p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">only </span><span class="token punctuation">(</span><span class="token punctuation">[</span>“name”<span class="token punctuation">,</span> “password”<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">-&gt;</span><span class="token function">only </span><span class="token punctuation">(</span>“name”<span class="token punctuation">,</span> “password”<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">-&gt;</span><span class="token function">except </span><span class="token punctuation">(</span>“name”<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p><strong>Determine Input (present / absent)</strong></p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">has </span><span class="token punctuation">(</span>“name”<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">-&gt;</span><span class="token function">has </span><span class="token punctuation">(</span><span class="token punctuation">[</span>“name”<span class="token punctuation">,</span> “age”<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">-&gt;</span><span class="token function">filled </span><span class="token punctuation">(</span>“‘name”<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment"># If present and NOT EMPTY</span>
</code></pre></div></li> <li><p><strong>Old Input</strong></p> <ul><li>Handled automatically if built-in solution is used</li> <li><em>Only 1 next request the input is saved</em><div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">flash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">-&gt;</span><span class="token function">flashOnly </span><span class="token punctuation">(</span><span class="token punctuation">[</span>‘name’<span class="token punctuation">,</span> ‘age’<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">-&gt;</span><span class="token function">flashExcept </span><span class="token punctuation">(</span><span class="token punctuation">[</span>‘password’<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><em>Flash &amp; redirect</em><div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">return</span> <span class="token function">redirect </span><span class="token punctuation">(</span>‘myform’<span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">withInput</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                          <span class="token operator">-&gt;</span><span class="token function">withInput </span><span class="token punctuation">(</span><span class="token punctuation">[</span>‘name’<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><em>Retrieve Old Input</em><div class="language-php extra-class"><pre class="language-php"><code>request<span class="token operator">-&gt;</span><span class="token function">old </span><span class="token punctuation">(</span>‘name’<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># &lt; input tupe=”text” value=”{{ old (‘name’) }}” &gt;</span>
</code></pre></div></li></ul></li> <li><p><strong>Cookies (retrieve)</strong></p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token class-name static-context">Cookie</span><span class="token operator">::</span><span class="token function">get </span><span class="token punctuation">(</span>‘name’<span class="token punctuation">)</span><span class="token string backtick-quoted-string">` &amp; `</span><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">cookie </span><span class="token punctuation">(</span>‘name’<span class="token punctuation">)</span>
</code></pre></div></li> <li><p><strong>Files</strong></p> <ul><li><em>Retrieve uploaded files</em><div class="language-php extra-class"><pre class="language-php"><code>  <span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">file </span><span class="token punctuation">(</span>“photo”<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token operator">-&gt;</span><span class="token property">photo</span><span class="token punctuation">;</span>
          <span class="token operator">-&gt;</span><span class="token function">hasFile </span><span class="token punctuation">(</span>“photo”<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><em>Valid file</em> <ul><li><code>$request-&gt;file (“photo”)-&gt;isValid();</code></li></ul></li> <li><em>File path &amp; extension</em><div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">file </span><span class="token punctuation">(</span>“photo”<span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token operator">-&gt;</span><span class="token function">extension</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><em>Store uploaded files</em> <ul><li><code>config/filesystems.php</code></li> <li><code>store()</code> <ul><li><em>uniqueid</em> as filename</li></ul> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">file </span><span class="token punctuation">(</span>“photo”<span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">store </span><span class="token punctuation">(</span>“path”<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">-&gt;</span><span class="token function">store </span><span class="token punctuation">(</span>“path”<span class="token punctuation">,</span> ”s3”<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">-&gt;</span><span class="token function">storeAs </span><span class="token punctuation">(</span>“path”<span class="token punctuation">,</span> “filename<span class="token operator">.</span>jpg”<span class="token punctuation">,</span> “s3”<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul></li></ul></li></ul> <h2 id="responses"><a href="#responses" class="header-anchor">#</a> # RESPONSES</h2> <ul><li><p><strong>Create Response</strong></p> <ul><li><p><em>String &amp; Arrays</em></p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">return</span> “hello world”<span class="token punctuation">;</span>
       <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">,</span> <span class="token number">76</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p><em>Objects</em></p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">return</span> <span class="token function">response </span><span class="token punctuation">(</span>“hello”<span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">header </span><span class="token punctuation">(</span>“content<span class="token operator">-</span>type”<span class="token punctuation">,</span> “text<span class="token operator">/</span>plain”<span class="token punctuation">)</span><span class="token punctuation">;</span>
                              <span class="token operator">-&gt;</span><span class="token function">header </span><span class="token punctuation">(</span>“foo”<span class="token punctuation">,</span> “bar”<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">return</span> <span class="token function">response </span><span class="token punctuation">(</span><span class="token variable">$content</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">withHeaders </span><span class="token punctuation">(</span><span class="token punctuation">[</span>
	“<span class="token constant">H1</span>” <span class="token operator">=&gt;</span> “v1”<span class="token punctuation">,</span>
	“<span class="token constant">H2</span>” <span class="token operator">=&gt;</span> “v2”<span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p><em>Attach cookies</em></p> <ul><li>Encrypted &amp; signed by <strong>EncryptCookies</strong> Middleware</li></ul> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">return</span> <span class="token function">response </span><span class="token punctuation">(</span><span class="token variable">$content</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">cookie </span><span class="token punctuation">(</span>“name”<span class="token punctuation">,</span> “value”<span class="token punctuation">,</span> <span class="token variable">$minutes</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul></li> <li><p><strong>Redirects</strong></p> <ul><li><em>Global helper</em><div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">return</span> <span class="token function">redirect </span><span class="token punctuation">(</span>“url”<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">withInput</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><em>Named routes</em><div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">return</span> <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">route </span><span class="token punctuation">(</span>“RouteName”<span class="token punctuation">)</span><span class="token punctuation">;</span>
                 <span class="token operator">-&gt;</span><span class="token function">route </span><span class="token punctuation">(</span>“RouteName”<span class="token punctuation">,</span> <span class="token punctuation">[</span>‘id’ <span class="token operator">=&gt;</span> <span class="token number">11</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><em>Actions</em><div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">return</span> <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">actions </span><span class="token punctuation">(</span>“MyController@index” <span class="token punctuation">)</span><span class="token punctuation">;</span>
                 <span class="token operator">-&gt;</span><span class="token function">actions </span><span class="token punctuation">(</span>“MyController@index” <span class="token punctuation">,</span> <span class="token punctuation">[</span>“id” <span class="token operator">=&gt;</span> “value”<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><em>External domain</em><div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">return</span> <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">away </span><span class="token punctuation">(</span>“<span class="token argument-name">https</span><span class="token punctuation">:</span><span class="token comment">//google.com”);</span>
</code></pre></div></li> <li><em>With session data</em><div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">return</span> <span class="token function">redirect </span><span class="token punctuation">(</span>“url”<span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">with </span><span class="token punctuation">(</span>“Key”<span class="token punctuation">,</span> “Value”<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul></li> <li><p><strong>Other response types</strong></p> <ul><li><em>View</em><div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">return</span> <span class="token function">response</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">view </span><span class="token punctuation">(</span>“hello”<span class="token punctuation">,</span> <span class="token variable">$data</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">header </span><span class="token punctuation">(</span>“<span class="token constant">H1</span>”<span class="token punctuation">,</span> “<span class="token constant">V1</span>”<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># Note: use global view() helper method if custom header not needed</span>
</code></pre></div></li> <li><em>Json</em><div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">return</span> <span class="token function">response</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">json </span><span class="token punctuation">(</span><span class="token punctuation">[</span>“name” <span class="token operator">=&gt;</span> “umesh”<span class="token punctuation">,</span> “age” <span class="token operator">=&gt;</span> <span class="token number">28</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># Content-type is set to application/json &amp; array is converted to json</span>
</code></pre></div></li> <li><em>Download</em><div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">return</span> <span class="token function">response</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">download </span><span class="token punctuation">(</span>“path”<span class="token punctuation">,</span> “name<span class="token operator">.</span>jpg”<span class="token punctuation">,</span> <span class="token variable">$headerOptional</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                 <span class="token operator">-&gt;</span><span class="token function">download </span><span class="token punctuation">(</span>“path”<span class="token punctuation">)</span><span class="token punctuation">;</span>
                 <span class="token operator">-&gt;</span><span class="token function">download </span><span class="token punctuation">(</span>“path”<span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">deleteFileAfterSend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><em>Open in browser (pdf / images)</em><div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">return</span> <span class="token function">response</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">file </span><span class="token punctuation">(</span>“path”<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul></li></ul> <h2 id="views"><a href="#views" class="header-anchor">#</a> # VIEWS</h2> <ul><li><p><strong>File</strong> - <code>resources/views/welcome.blade.php</code></p></li> <li><p><strong>Return View</strong></p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">return</span> <span class="token function">view </span><span class="token punctuation">(</span>“welcome”<span class="token punctuation">,</span> <span class="token punctuation">[</span>“name” <span class="token operator">=&gt;</span> “james”<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token function">view </span><span class="token punctuation">(</span>“welcome”<span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">with </span><span class="token punctuation">(</span><span class="token punctuation">[</span>“name” <span class="token operator">=&gt;</span> “james”<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p><strong>Variable shared with all views</strong></p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment"># AppServiceProvider or MyProvider</span>
<span class="token function">boot</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name static-context">View</span><span class="token operator">::</span><span class="token function">share </span><span class="token punctuation">(</span>‘key’<span class="token punctuation">,</span> ‘value’<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p><strong>Composer</strong></p> <ul><li><p>Composer is a class method called during rendering of view</p></li> <li><p><em>Location</em> : “app/Http/View/Composers/ProfileComposer”</p></li> <li><p><em>Register composer</em></p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment"># ViewServiceProvider</span>
<span class="token function">boot</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name static-context">View</span><span class="token operator">::</span><span class="token function">composer </span><span class="token punctuation">(</span>‘profile’<span class="token punctuation">,</span> ‘App\Http\View\Composers\ProfileComposer’<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment"># File based ‘profile.blade.php’</span>
  <span class="token class-name static-context">View</span><span class="token operator">::</span><span class="token function">composer </span><span class="token punctuation">(</span>‘profile’<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> ………<span class="token operator">.</span><span class="token operator">.</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                       <span class="token comment"># Closure based</span>

  <span class="token comment"># Muliple views : [‘profile’, ‘home’, ‘welcome’]</span>
  <span class="token comment"># all views : “\*”</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p><em>ProfileComposer</em></p> <ul><li><code>compose()</code> called whenever profile view is rendered &amp; <code>$count</code> variable available</li></ul> <div class="language-php extra-class"><pre class="language-php"><code><span class="token function">compose </span><span class="token punctuation">(</span><span class="token class-name type-declaration">View</span> <span class="token variable">$view</span><span class="token punctuation">,</span> <span class="token class-name type-declaration">UserRepo</span> <span class="token variable">$users</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token variable">$view</span><span class="token operator">-&gt;</span><span class="token function">with </span><span class="token punctuation">(</span>‘count’<span class="token punctuation">,</span> <span class="token variable">$users</span><span class="token operator">-&gt;</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></li></ul> <h2 id="url-generations"><a href="#url-generations" class="header-anchor">#</a> # URL GENERATIONS</h2> <ul><li><strong>Basics</strong><div class="language-php extra-class"><pre class="language-php"><code><span class="token function">url </span><span class="token punctuation">(</span>“posts<span class="token operator">/</span><span class="token number">11</span>”<span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment"># https://example.com/posts/11</span>
<span class="token function">url</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">current</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment"># without query</span>
     <span class="token operator">-&gt;</span><span class="token function">full</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token operator">-&gt;</span><span class="token function">previous</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><strong>Named Route</strong><div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$url</span> <span class="token operator">=</span> <span class="token function">route </span><span class="token punctuation">(</span>“RouteName”<span class="token punctuation">,</span> <span class="token punctuation">[</span>‘id’ <span class="token operator">=&gt;</span> <span class="token number">11</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><strong>Signed urls</strong><div class="language-php extra-class"><pre class="language-php"><code><span class="token class-name static-context">URL</span><span class="token operator">::</span><span class="token function">signedRoute </span><span class="token punctuation">(</span>“unsubscribe”<span class="token punctuation">,</span> <span class="token punctuation">[</span>“user” <span class="token operator">=&gt;</span> <span class="token number">11</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token operator">::</span><span class="token function">temporarySignedRoute </span><span class="token punctuation">(</span>‘unsubscribe”<span class="token punctuation">,</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">addMinutes </span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>“user” <span class="token operator">=&gt;</span> <span class="token number">11</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><em>Validation of sign</em> (can be a middleware)
<ul><li><code>$request-&gt;hasValidSignature()</code></li></ul></li></ul></li> <li><strong>Controllers actions</strong><div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$url</span> <span class="token operator">=</span> <span class="token function">action </span><span class="token punctuation">(</span>“homeController@show”<span class="token punctuation">,</span> <span class="token punctuation">[</span>‘id’ <span class="token operator">=&gt;</span> <span class="token number">11</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h2 id="sessions"><a href="#sessions" class="header-anchor">#</a> # SESSIONS</h2> <ul><li><strong>Introduction</strong> <ul><li>HTTP is <em>stateless</em> protocol</li> <li><em>config/session.php</em> <ul><li>Options : <code>file, cookie, database, redis, memcached</code></li></ul></li> <li><em>database (table)</em> <ul><li><code>php artisan session:table</code></li></ul></li> <li><em>redis</em> <ul><li><code>composer require predis/predis</code></li> <li>See <code>config/database.php</code></li></ul></li></ul></li> <li><strong>Using Sessions</strong> <ul><li><em>Retrieve key value</em><div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get </span><span class="token punctuation">(</span>“key”<span class="token punctuation">)</span><span class="token punctuation">;</span>
                   <span class="token operator">-&gt;</span><span class="token function">get </span><span class="token punctuation">(</span>“key”<span class="token punctuation">,</span> “<span class="token keyword">default</span>”<span class="token punctuation">)</span><span class="token punctuation">;</span>
                   <span class="token operator">-&gt;</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># OR</span>
<span class="token function">session </span><span class="token punctuation">(</span>“key”<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">(</span>“key”<span class="token punctuation">,</span> “<span class="token keyword">default</span>”<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><em>Store new key</em><div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">put </span><span class="token punctuation">(</span>‘key’<span class="token punctuation">,</span> ‘value’<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># OR</span>
<span class="token function">session </span><span class="token punctuation">(</span><span class="token punctuation">[</span>“key”  <span class="token operator">=&gt;</span> “value”<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><em>Push / Pull</em><div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">push </span><span class="token punctuation">(</span>‘key’<span class="token punctuation">,</span> ‘value’<span class="token punctuation">)</span><span class="token punctuation">;</span>
                   <span class="token operator">-&gt;</span><span class="token function">pull </span><span class="token punctuation">(</span>‘key’<span class="token punctuation">,</span> ‘<span class="token keyword">default</span>’<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment"># returns key or default value</span>
</code></pre></div></li> <li><em>has / exits</em><div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">exists </span><span class="token punctuation">(</span>“key”<span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment"># value can be null</span>
                   <span class="token operator">-&gt;</span><span class="token function">has </span><span class="token punctuation">(</span>“key”<span class="token punctuation">)</span><span class="token punctuation">;</span>		    <span class="token comment"># value Not null</span>
</code></pre></div></li> <li><em>Flash data</em><div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">flash </span><span class="token punctuation">(</span>“status”<span class="token punctuation">,</span> “Successful”<span class="token punctuation">)</span><span class="token punctuation">;</span>
                   <span class="token operator">-&gt;</span><span class="token function">reflash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                   <span class="token operator">-&gt;</span><span class="token function">keep </span><span class="token punctuation">(</span><span class="token punctuation">[</span>‘name’<span class="token punctuation">,</span> ‘age’<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><em>Remove</em><div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">forget </span><span class="token punctuation">(</span>“key”<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">-&gt;</span><span class="token function">forget </span><span class="token punctuation">(</span><span class="token punctuation">[</span>“key”<span class="token punctuation">,</span> “key2”<span class="token operator">...</span><span class="token operator">...</span><span class="token operator">.</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">-&gt;</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><em>Regenerate session id</em> (Done automatically on user login)<div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">regenerate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul></li></ul> <h2 id="validation"><a href="#validation" class="header-anchor">#</a> # VALIDATION</h2> <ul><li><p><strong>Validate()</strong></p> <ul><li><em>If validation fails response is automatic</em> <ul><li><em>http response</em> for http request (redirect to previous)</li> <li><em>json response</em> for ajax request</li></ul></li> <li>Ex:<div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$valid</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">validate </span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  “title” <span class="token operator">=&gt;</span> “<span class="token class-name">required</span> <span class="token operator">|</span> <span class="token argument-name">max</span><span class="token punctuation">:</span><span class="token number">255</span>” <span class="token punctuation">,</span>
  “age” <span class="token operator">=&gt;</span> “required”
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><strong>bail</strong> rule to stop checking for next rule after a rule fails</li> <li><em>Null values</em> <ul><li>Uses middlewares : <code>TrimString</code> &amp; <code>ConvertEmptyStringsToNull</code></li> <li><code>null</code> values gives validation error. So use <em>nullable</em> rule
<ul><li><code>‘date’ =&gt; ‘nullable | date’</code></li></ul></li></ul></li></ul></li> <li><p><strong>Form Request Validation</strong></p> <ul><li><em>Create</em><div class="language-php extra-class"><pre class="language-php"><code>php artisan <span class="token argument-name">make</span><span class="token punctuation">:</span>request StoreBlogPost
</code></pre></div></li> <li><em>Rules</em><div class="language-php extra-class"><pre class="language-php"><code><span class="token function">rules</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>
    ‘name’ <span class="token operator">=&gt;</span> ‘<span class="token class-name">required</span> <span class="token operator">|</span> <span class="token argument-name">max</span><span class="token punctuation">:</span><span class="token number">250</span>’ <span class="token punctuation">,</span>
    ‘age’ <span class="token operator">=&gt;</span> ‘required’
  <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><em>Authorize</em><div class="language-php extra-class"><pre class="language-php"><code><span class="token comment"># Route::post (‘comment/{ commentPara }, …..)</span>
<span class="token function">authorize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// return true if user is authorized to comment</span>
  <span class="token variable">$comment</span> <span class="token operator">=</span> <span class="token class-name static-context">Comment</span><span class="token operator">::</span><span class="token function">find </span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">route </span><span class="token punctuation">(</span>‘commentPara’<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token variable">$comment</span>  <span class="token operator">&amp;&amp;</span>  <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">can</span><span class="token punctuation">(</span>‘update’<span class="token punctuation">,</span> <span class="token variable">$comment</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// or</span>
  <span class="token keyword">return</span> <span class="token constant boolean">true</span><span class="token punctuation">;</span> <span class="token comment"># return true for always authorized</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><em>Custom error messages</em><div class="language-php extra-class"><pre class="language-php"><code><span class="token function">message</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>‘name<span class="token operator">.</span>required’ <span class="token operator">=&gt;</span> ‘Invalid <span class="token keyword">or</span> missing name<span class="token operator">.</span> Please check again’<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><em>Use in controller</em><div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">store </span><span class="token punctuation">(</span><span class="token class-name type-declaration">StoreBlogRequest</span> <span class="token variable">$request</span><span class="token punctuation">,</span> <span class="token variable">$id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token variable">$valid</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-&gt;</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></li> <li><p><strong>Manually create validators</strong></p> <ul><li>Not much usefull. see docs.</li></ul></li> <li><p><strong>Errors Messages</strong></p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$errors</span><span class="token operator">-&gt;</span><span class="token function">first </span><span class="token punctuation">(</span>‘email’<span class="token punctuation">)</span>      <span class="token comment"># 1st error for email field</span>
       <span class="token operator">-&gt;</span><span class="token function">get </span><span class="token punctuation">(</span>‘email’<span class="token punctuation">)</span>        <span class="token comment"># all errors for email field</span>
             <span class="token punctuation">(</span>‘projects<span class="token operator">.</span><span class="token operator">*</span>’<span class="token punctuation">)</span>   <span class="token comment"># all errors for array</span>
       <span class="token operator">-&gt;</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token comment"># all errors all fields</span>
       <span class="token operator">-&gt;</span><span class="token function">has </span><span class="token punctuation">(</span>‘email’<span class="token punctuation">)</span>        <span class="token comment"># check if error for email field</span>
       <span class="token operator">-&gt;</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token comment"># check if any error in any field</span>
</code></pre></div></li></ul> <h2 id="error-handling"><a href="#error-handling" class="header-anchor">#</a> # ERROR HANDLING</h2> <ul><li><strong>APP_DEBUG option in .env</strong> <ul><li><em>true</em> = development</li> <li><em>false</em> = production</li></ul></li> <li><strong>Exception Handler Class</strong> <ul><li><em>App\Exception\Handler</em></li> <li><em>report()</em> <ul><li><em>log</em> or <em>send</em> exceptions to <code>bugsnag/sentry</code></li> <li>Passes exception to base class for logging</li> <li>Custom way to handle any exception
<ul><li><code>if ($exception instanceof CustomException) { …….. }</code></li></ul></li> <li><code>report()</code> (helper method)
<ul><li>Reports exception &amp; continues execution</li></ul> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token comment"># code…..</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> <span class="token variable">$e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">report </span><span class="token punctuation">(</span><span class="token variable">$e</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  report <span class="token constant boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></li> <li><em>Ignore Exceptions</em><div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">protected</span> <span class="token variable">$dontreport</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
	<span class="token class-name class-name-fully-qualified static-context"><span class="token punctuation">\</span>Illuminate<span class="token punctuation">\</span>Auth<span class="token punctuation">\</span>AuthenticationException</span><span class="token operator">::</span><span class="token keyword">class</span> <span class="token punctuation">,</span>
	<span class="token class-name class-name-fully-qualified static-context"><span class="token punctuation">\</span>Illuminate<span class="token punctuation">\</span>Database<span class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>ModelNotFoundException</span><span class="token operator">::</span><span class="token keyword">class</span>
<span class="token punctuation">]</span>
</code></pre></div></li> <li><em>render()</em> <ul><li>Generates <code>http</code> response</li></ul> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$exception</span> <span class="token keyword">instanceof</span> <span class="token class-name">CustomException</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">response</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">view </span><span class="token punctuation">(</span>‘errors<span class="token operator">.</span>custom’<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><em>Custom class</em><div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">class</span> MyException <span class="token keyword">extends</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
  <span class="token function">report</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> ……<span class="token operator">.</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">render </span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> ……<span class="token operator">.</span><span class="token operator">.</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><em>HTTP Exceptions</em> <ul><li><code>abort()</code></li></ul> <div class="language-php extra-class"><pre class="language-php"><code><span class="token function">abort </span><span class="token punctuation">(</span><span class="token number">404</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">(</span><span class="token number">403</span><span class="token punctuation">,</span> “Unauthorized action”<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>Views to edit
<ul><li><code>views/errors/404.blade.php</code></li> <li><code>php artisan vendor:publlish --tag=laravel</code></li></ul></li></ul></li></ul></li></ul> <h2 id="logging"><a href="#logging" class="header-anchor">#</a> # LOGGING</h2> <ul><li>Uses <em>Monolog</em> library</li> <li><strong>config/logging.php</strong> <ul><li><em>Channel drivers</em> <ul><li><code>stack (multi-channel)</code> - syslog</li> <li><code>single</code> - errorlog</li> <li><code>daily</code> - monolog</li> <li><code>slack</code> - custom</li></ul></li></ul></li> <li>see docs for details</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">3/9/2021, 3:00:14 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/technotes/laravel/v6/2-ArchitecturalConcepts.html" class="prev">
        ARCHITECTURAL CONCEPTS
      </a></span> <span class="next"><a href="/technotes/laravel/v6/4-Frontend.html">
        FRONTEND
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/technotes/assets/js/app.8104ebb8.js" defer></script><script src="/technotes/assets/js/2.caedfb41.js" defer></script><script src="/technotes/assets/js/45.bbeeb042.js" defer></script>
  </body>
</html>
